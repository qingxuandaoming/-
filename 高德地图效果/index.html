<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜å¾·åœ°å›¾åº”ç”¨</title>
    <!-- å¼•å…¥æ‹†åˆ†åçš„CSSæ–‡ä»¶ -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/route.css">
    <link rel="stylesheet" href="css/track.css">
    <link rel="stylesheet" href="css/map.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>é«˜å¾·åœ°å›¾åº”ç”¨</h1>
            <button id="help-btn" class="help-button" title="æŸ¥çœ‹åŠŸèƒ½è¯´æ˜æ–‡æ¡£">
                <span class="help-icon">ğŸ“–</span>
                <span class="help-text">åŠŸèƒ½è¯´æ˜æ–‡æ¡£</span>
            </button>
        </header>
        
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="keyword" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯">
                <button id="search-btn">æœç´¢</button>
            </div>
            <div class="search-options">
                <label><input type="radio" name="search-type" value="poi" checked><span>POIæœç´¢</span></label>
                <label><input type="radio" name="search-type" value="around"><span>å‘¨è¾¹æœç´¢</span></label>
            </div>
        </div>
        
        <div class="route-container">
            <div class="route-box">
                <h3>è·¯çº¿è§„åˆ’</h3>
                <div class="route-inputs">
                    <div class="input-group">
                        <input type="text" id="start-point" placeholder="èµ·ç‚¹">
                        <button id="current-location-btn" title="ä½¿ç”¨å½“å‰ä½ç½®">ğŸ“</button>
                    </div>
                    <button id="swap-btn" title="äº¤æ¢èµ·ç»ˆç‚¹">â‡…</button>
                    <div class="input-group">
                        <input type="text" id="end-point" placeholder="ç»ˆç‚¹">
                    </div>
                </div>
                <div class="transport-options">
                    <button id="driving-btn" class="active">é©¾è½¦</button>
                    <button id="walking-btn">æ­¥è¡Œ</button>
                    <button id="transit-btn">å…¬äº¤</button>
                    <button id="riding-btn">éª‘è¡Œ</button>
                </div>
                <button id="route-btn">è§„åˆ’è·¯çº¿</button>
            </div>
        </div>
        
        <div class="track-container">
            <div class="track-box">
                <h3>è½¨è¿¹åŠŸèƒ½</h3>
                <div class="track-controls">
                    <button id="start-track-btn">å¼€å§‹è®°å½•è½¨è¿¹</button>
                    <button id="stop-track-btn" disabled>åœæ­¢è®°å½•</button>
                    <button id="clear-track-btn">æ¸…é™¤è½¨è¿¹</button>
                    <button id="save-track-btn" disabled>ä¿å­˜è½¨è¿¹</button>
                    <button id="load-track-btn">åŠ è½½è½¨è¿¹</button>
                    <button id="demo-track-btn">åŠ è½½é¢„è®¾è½¨è¿¹</button>
                </div>
                <div class="track-animation-controls">
                    <h4>è½¨è¿¹åŠ¨ç”»æ§åˆ¶</h4>
                    <div class="animation-buttons">
                        <button id="play-track-btn" disabled>æ’­æ”¾åŠ¨ç”»</button>
                        <button id="pause-track-btn" disabled>æš‚åœåŠ¨ç”»</button>
                        <button id="stop-animation-btn" disabled>åœæ­¢åŠ¨ç”»</button>
                    </div>
                </div>
                <div class="track-info">
                    <span id="track-status">æœªå¼€å§‹è®°å½•</span>
                    <span id="track-distance">è·ç¦»: 0 km</span>
                    <span id="track-time">æ—¶é—´: 00:00:00</span>
                </div>
                <input type="file" id="track-file-input" accept=".json" style="display: none;">
            </div>
        </div>
        
        <div class="map-container">
            <div id="map"></div>
        </div>
        
        <div class="info-panel">
            <div class="panel-header">
                <h3>ä¿¡æ¯é¢æ¿</h3>
                <button id="close-panel">Ã—</button>
            </div>
            <div id="panel-content"></div>
        </div>
        
        <!-- åŠŸèƒ½è¯´æ˜æ–‡æ¡£æ‚¬æµ®çª—å£ -->
        <div id="help-modal" class="help-modal">
            <div class="help-modal-content">
                <div class="help-modal-header">
                    <h2>ğŸ“– åŠŸèƒ½è¯´æ˜æ–‡æ¡£</h2>
                    <button id="close-help-modal" class="close-help-btn">Ã—</button>
                </div>
                <div class="help-modal-body">
                    <iframe id="help-iframe" src="" frameborder="0"></iframe>
                </div>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨å­¦ç”Ÿä¿¡æ¯åŒºåŸŸ -->
    <footer class="student-footer">
        <div class="footer-content">
            <div class="student-info">
                <span class="project-title">é™ˆå† è¡¡æš‘æœŸè°ƒç ”ç»“è¯¾ä½œä¸š</span>
                <span class="student-id">å­¦å·ï¼š202322451002</span>
            </div>
            <div class="footer-decoration">
                <div class="decoration-line"></div>
                <div class="decoration-dot"></div>
                <div class="decoration-line"></div>
            </div>
        </div>
    </footer>
    
    <!-- Canvasæ€§èƒ½ä¼˜åŒ–è„šæœ¬ - å¿…é¡»åœ¨é«˜å¾·åœ°å›¾APIä¹‹å‰åŠ è½½ -->
    <script src="js/canvas-optimizer.js"></script>
    
    <!-- é«˜å¾·åœ°å›¾APIå®‰å…¨å¯†é’¥é…ç½® -->
    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: "045a4882fc3282b9bf01d689b11a06d7"
        };
        
        // é˜²æ­¢Chromeæ‰©å±•é€šä¿¡é”™è¯¯
        window.addEventListener('error', function(e) {
            if (e.message && e.message.includes('Extension context invalidated')) {
                console.warn('Chromeæ‰©å±•ä¸Šä¸‹æ–‡å¤±æ•ˆï¼Œå¿½ç•¥æ­¤é”™è¯¯');
                e.preventDefault();
                return false;
            }
        });
        
        // æ•è·æœªå¤„ç†çš„Promiseæ‹’ç»
        window.addEventListener('unhandledrejection', function(e) {
            if (e.reason && e.reason.message && e.reason.message.includes('message port closed')) {
                console.warn('æ¶ˆæ¯ç«¯å£å…³é—­é”™è¯¯ï¼Œå¿½ç•¥æ­¤é”™è¯¯');
                e.preventDefault();
                return false;
            }
        });
    </script>
    
    <!-- é«˜å¾·åœ°å›¾API -->
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=cc888f3fbd2b5c82cb3b842d8277c241"></script>
    <script type="text/javascript" src="https://webapi.amap.com/ui/1.1/main.js"></script>
    
    <!-- å¼•å…¥æ‹†åˆ†åçš„JSæ¨¡å—æ–‡ä»¶ -->
    <script src="js/utils.js"></script>
    <script src="js/map.js"></script>
    <script src="js/search.js"></script>
    <script src="js/route.js"></script>
    <script src="js/track.js"></script>
    <script src="js/help-modal.js"></script>
    <script src="js/app.js"></script>
</body>
</html>